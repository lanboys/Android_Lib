<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>HTTP权威指南 (图灵程序设计丛书)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos576487" class="calibre_"><span class="calibre3"><span class="bold">8.1　网关</span></span></p><p class="calibre_">HTTP 扩展和接口的发展是由用户需求驱动的。要在 Web 上发布更复杂资源的需求出现时，人们很快就明确了一点：单个应用程序无法处理所有这些能想到的资源。</p><p class="calibre_">为了解决这个问题，开发者提出了<span class="bold">网关</span>（gateway）的概念，网关可以作为某种翻译器使用，它抽象出了一种能够到达资源的方法。网关是资源和应用程序之间的粘合剂。应用程序可以（通过 HTTP 或其他已定义的接口）请求网关来处理某条请求，网关可以提供一条响应。网关可以向数据库发送查询语句，或者生成动态的内容，就像一个门一样：进去一条请求，出来一个响应。</p><p class="calibre_">图 8-1 显示的是一种资源网关。在这里，Joe 的五金商店服务器就是作为连接数据库内容的网关使用的——注意，客户端只是在通过 HTTP 请求资源，而 Joe 的五金商店的服务器在与网关进行交互以获取资源。</p><p class="calibre_8"><img src="images/00052.jpg" class="calibre_140"/></p><p class="calibre_10"><span class="calibre7">图 8-1　网关的魔力</span></p><p class="calibre_">有些网关会自动将 HTTP 流量转换为其他协议，这样 HTTP 客户端无需了解其他协议，就可以与其他应用程序进行交互了（参见图 8-2）。</p><p class="calibre_8"><img src="images/00058.jpg" class="calibre_84"/></p><p class="calibre_10"><span class="calibre7">图 8-2　三个 Web 网关实例</span></p><p class="calibre_">图 8-2 显示了三个网关的示例。</p><div class="calibre_5"> </div><ul class="calibre_6"><li value="1" class="calibre_7"><p class="calibre_">在图 8-2a 中，网关收到了对 FTP URL 的 HTTP 请求。然后网关打开 FTP 连接，并向 FTP 服务器发布适当的命令。然后将文档和正确的 HTTP 首部通过 HTTP 回送。</p></li><li value="2" class="calibre_7"><p class="calibre_">在图 8-2b 中，网关通过 SSL 收到了一条加密的 Web 请求，网关会对请求进行解密，<sup class="calibre4"><small class="calibre5"><span class="calibre6">1</span></small></sup> 然后向目标服务器转发一条普通的 HTTP 请求。可以将这些安全加速器直 接放在（通常处于同一场所的）Web 服务器前面，以便为原始服务器提供高性能 的加密机制。</p><p class="calibre_"><sup class="calibre4"><small class="calibre5"><span class="calibre6">1 网关上要安装适当的服务器证书。</span></small></sup></p></li><li value="3" class="calibre_7"><p class="calibre_">在图 8-2c 中，网关通过应用程序服务器网关 API，将 HTTP 客户端连接到服务器端的应用程序上去。在网上的电子商店购物、查看天气预报，或者获取股票报价时，访问的就是应用程序服务器网关。</p></li></ul><p class="calibre_"><span class="calibre3"><span class="bold">客户端和服务器端网关</span></span></p><p class="calibre_">Web 网关在一侧使用 HTTP 协议，在另一侧使用另一种协议。<sup class="calibre4"><small class="calibre5"><span class="calibre6">2</span></small></sup></p><p class="calibre_"><sup class="calibre4"><small class="calibre5"><span class="calibre6">2 在不同 HTTP 版本之间进行转换的 Web 代理就像网关一样，它们会执行复杂的逻辑，以便在各个端点之间进行沟通。但因为它们在两侧使用的都是 HTTP，所以从技术上来讲，它们还是代理。</span></small></sup></p><p class="calibre_">可以用一个斜杠来分隔客户端和服务器端协议，并以此对网关进行描述：</p><p class="calibre_">&lt; 客户端协议 &gt;/&lt; 服务器端协议 &gt;</p><p class="calibre_">因此，将 HTTP 客户端连接到 NNTP 新闻服务器的网关就是一个 HTTP/NNTP 网关。我们用术语服务器端网关和客户端网关来说明对话是在网关的哪一侧进行的。</p><div class="calibre_5"> </div><ul class="calibre_6"><li value="1" class="calibre_7"><p class="calibre_"><span class="bold">服务器端网关</span>（server-side gateway）通过 HTTP 与客户端对话，通过其他协议与服务器通信（HTTP/*）。</p></li><li value="2" class="calibre_7"><p class="calibre_"><span class="bold">客户端网关</span>（client-side gateway）通过其他协议与客户端对话，通过 HTTP 与服务器通信（*/HTTP）。 </p></li></ul><div class="mbp_pagebreak" id="calibre_pb_84"></div>
</body></html>
