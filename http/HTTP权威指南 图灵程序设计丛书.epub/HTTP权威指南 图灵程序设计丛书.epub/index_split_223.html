<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>HTTP权威指南 (图灵程序设计丛书)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p class="calibre_"><span class="calibre3"><span class="bold">F.3　摘要 </span></span><span class="calibre3"><tt class="calibre8"><span class="bold">Authentication-Info</span></tt></span><span class="calibre3"><span class="bold"> 指令</span></span></p><p class="calibre_">表 F-3 根据 RFC 2617 的描述，对每条 <tt class="calibre8">Authentication-Info</tt> 指令都进行了说明。最新的细节请参见官方规范。</p><p class="calibre_"><span class="bold">表F-3　（来自RFC 2617的）摘要 </span><tt class="calibre8"><span class="bold">Authentication-Info</span></tt><span class="bold"> 首部指令</span></p><p class="calibre2" style="margin:0pt; border:0pt; height:1em"> </p><table valign="top" class="calibre_14"><tr valign="top" class="calibre9"><th valign="top" class="calibre_34"><span class="calibre7"><span class="bold"> 指　　令 </span></span>
</th><th valign="top" class="calibre_46"><span class="calibre7"><span class="bold"> 描　　述 </span></span>
</th></tr><tr valign="top" class="calibre_17"><td valign="top" class="calibre10"><span class="calibre7"> nextnonce </span><span class="calibre_18">
</span></td><td valign="top" class="calibre10"><span class="calibre7"> nextnonce 指令的值是服务器希望客户端为未来的认证响应使用的 nonce。服务器可能会发送带有 nextnonce 字段的 </span><span class="calibre11"><tt class="calibre8">Authentication-Info</tt></span><span class="calibre7"> 首部，作为实现一次性 nonce 或修改 nonce 的手段。如果提供了 nextnonce 字段，客户端在为下一条请求构建 </span><span class="calibre11"><tt class="calibre8">Authorization</tt></span><span class="calibre7"> 首部时就应该使用它。客户端如果没能做到，就会收到来自服务器的 </span><span class="calibre11"><tt class="calibre8">"stale=TRUE"</tt></span><span class="calibre7"> 认证请求。</span><br class="calibre2"/><span class="calibre7"> </span><span class="calibre7">服务器实现应该仔细地考虑使用这种机制带来的性能影响。如果每条响应都包含了必须在服务器接收的下一条请求中使用的 nextnounce 指令，就不可能使用管道化请求了。应该考虑在性能和安全之间进行一些平衡，允许在有限的时间内使用老的 nonce 值，以实现请求的管道化。使用 nounce 计数可以在不影响管道化的情况下，维护一个新的服务器 nonce 的大部分安全优势</span><span class="calibre_18">
</span></td></tr><tr valign="top" class="calibre9"><td valign="top" class="calibre10"><span class="calibre7"> qop </span>
</td><td valign="top" class="calibre10"><span class="calibre7"> 说明了服务器应用到响应上的“安全保障”选项。值 auth 说明要进行认证，值 auth-int 说明要进行带有完整性保护的认证。服务器在响应中使用的 qop 指令值应该与客户端在相应请求中发送的值相同 </span>
</td></tr><tr valign="top" class="calibre_17"><td valign="top" class="calibre10"><span class="calibre7"> rspauth </span><span class="calibre_18">
</span></td><td valign="top" class="calibre10"><span class="calibre7"> response auth 指令中的可选响应摘要支持双向认证——服务器证明了它知道用户的密码，而且通过 </span><span class="calibre11"><tt class="calibre8">qop="auth-int"</tt></span><span class="calibre7">，它还为响应提供了有限的完整性保护。除了当 </span><span class="calibre11"><tt class="calibre8">qop="auth"</tt></span><span class="calibre7"> 或者没有在 </span><span class="calibre11"><tt class="calibre8">Authorization</tt></span><span class="calibre7"> 首部为请求指定 qop 的情况，</span><span class="calibre11"><tt class="calibre8">response-digest</tt></span><span class="calibre7"> 值的计算方式与 </span><span class="calibre11"><tt class="calibre8">Authorization</tt></span><span class="calibre7"> 首部的 </span><span class="calibre11"><tt class="calibre8">requestdigest</tt></span><span class="calibre7"> 类似，A2 为：</span><br class="calibre2"/><p class="calibre_134"><span class="calibre11"><tt class="calibre8">A2 = ":" digest-uri-value</tt></span></p><span class="calibre7">当 </span><span class="calibre11"><tt class="calibre8">qop="auth-int"</tt></span><span class="calibre7"> 时，A2 为：</span><br class="calibre2"/><p class="calibre_134"><span class="calibre11"><tt class="calibre8">A2 = ":" digest-uri-value ":" H(entity-body)</tt></span></p><span class="calibre7">其中 </span><span class="calibre11"><tt class="calibre8">digest-uri-value</tt></span><span class="calibre7"> 是请求的 </span><span class="calibre11"><tt class="calibre8">Authorization</tt></span><span class="calibre7"> 首部中 uri 指令的值。cnonce 和 nc 值一定要与此报文所响应的客户端请求中的相应值相同。如果指定了 </span><span class="calibre11"><tt class="calibre8">qop="auth "</tt></span><span class="calibre7"> 或者 </span><span class="calibre11"><tt class="calibre8">qop="auth-int" </tt></span><span class="calibre7">，就必须提供 rspauth 指令</span><span class="calibre_18">
</span></td></tr><tr valign="top" class="calibre9"><td valign="top" class="calibre10"><span class="calibre7"> cnonce </span>
</td><td valign="top" class="calibre10"><span class="calibre7"> cnonce 值一定要与此报文所响应的客户端请求中的相应值一样。如果指定了 </span><span class="calibre11"><tt class="calibre8">qop="auth "</tt></span><span class="calibre7"> 或 </span><span class="calibre11"><tt class="calibre8">qop="auth-int" </tt></span><span class="calibre7">，就必须提供cnonce 指令</span>
</td></tr><tr valign="top" class="calibre_17"><td valign="top" class="calibre10"><span class="calibre7"> nc </span><span class="calibre_18">
</span></td><td valign="top" class="calibre10"><span class="calibre7"> nc 值一定要与此报文所响应的客户端请求中的相应值一样。如果指定了 </span><span class="calibre11"><tt class="calibre8">qop="auth "</tt></span><span class="calibre7"> 或 </span><span class="calibre11"><tt class="calibre8">qop="auth-int" </tt></span><span class="calibre7">，就必须提供nc 指令</span><span class="calibre_18">
</span></td></tr><tr valign="top" class="calibre9"><td valign="top" class="calibre10"><span class="calibre7"> &lt;extension&gt; </span>
</td><td valign="top" class="calibre10"><span class="calibre7"> 未来可以通过这条指令进行扩展。所有不识别的指令都要忽略掉 </span>
</td></tr></table><p class="calibre2" style="margin:0pt; border:0pt; height:1em"> </p><p class="calibre2" style="margin:0pt; border:0pt; height:1em"> </p><div class="mbp_pagebreak" id="calibre_pb_223"></div>
</body></html>
