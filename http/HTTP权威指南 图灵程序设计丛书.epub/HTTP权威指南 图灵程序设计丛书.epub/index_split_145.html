<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>HTTP权威指南 (图灵程序设计丛书)</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p id="filepos980852" class="calibre_"><span class="calibre3"><span class="bold">15.1　报文是箱子，实体是货物</span></span></p><p class="calibre_">如果把 HTTP 报文想象成因特网货运系统中的箱子，那么 HTTP 实体就是报文中实际的货物。图 15-1 展示了一个简单的实体，装在 HTTP 响应报文中。</p><p class="calibre_8"><img src="images/00001.jpg" class="calibre_24"/></p><p class="calibre_10"><span class="calibre7">图 15-1　报文实体由实体首部和实体主体组成</span></p><p class="calibre_">实体首部指出这是一个纯文本文档（<tt class="calibre8">Content-Type:text/plain</tt>），它只有 18 个字节长（<tt class="calibre8">Content-Length:18</tt>）。和往常一样，一个空白行（CRLF）把首部字段同主体的开始部分分隔开来。</p><p class="calibre_">HTTP 实体首部（参见第 3 章）描述了 HTTP 报文的内容。HTTP/1.1 版定义了以下 10 个基本字体首部字段。</p><div class="calibre_5"> </div><ul class="calibre_6"><li value="1" class="calibre_7"><p class="calibre_"><tt class="calibre8">Content-Type</tt></p><p class="calibre_">实体中所承载对象的类型。</p></li><li value="2" class="calibre_7"><p class="calibre_"><tt class="calibre8">Content-Length</tt></p><p class="calibre_">所传送实体主体的长度或大小。</p></li><li value="3" class="calibre_7"><p class="calibre_"><tt class="calibre8">Content-Language</tt></p><p class="calibre_">与所传送对象最相配的人类语言。</p></li><li value="4" class="calibre_7"><p class="calibre_"><tt class="calibre8">Content-Encoding</tt></p><p class="calibre_">对象数据所做的任意变换（比如，压缩）。</p></li><li value="5" class="calibre_7"><p class="calibre_"><tt class="calibre8">Content-Location</tt></p><p class="calibre_">一个备用位置，请求时可通过它获得对象。</p></li><li value="6" class="calibre_7"><p class="calibre_"><tt class="calibre8">Content-Range</tt></p><p class="calibre_">如果这是部分实体，这个首部说明它是整体的哪个部分。</p></li><li value="7" class="calibre_7"><p class="calibre_"><tt class="calibre8">Content-MD5</tt></p><p class="calibre_">实体主体内容的校验和。</p></li><li value="8" class="calibre_7"><p class="calibre_"><tt class="calibre8">Last-Modified</tt></p><p class="calibre_">所传输内容在服务器上创建或最后修改的日期时间。</p></li><li value="9" class="calibre_7"><p class="calibre_"><tt class="calibre8">Expires</tt></p><p class="calibre_">实体数据将要失效的日期时间。</p></li><li value="10" class="calibre_7"><p class="calibre_"><tt class="calibre8">Allow</tt></p><p class="calibre_">该资源所允许的各种请求方法，例如，GET 和 HEAD。</p></li><li value="11" class="calibre_7"><p class="calibre_"><tt class="calibre8">ETag </tt> 这份文档特定实例（参见 15.7 节）的唯一验证码。<tt class="calibre8">ETag</tt> 首部没有正式定义为实体首部，但它对许多涉及实体的操作来说，都是一个重要的首部。</p></li><li value="12" class="calibre_7"><p class="calibre_"><tt class="calibre8">Cache-Control</tt></p><p class="calibre_">指出应该如何缓存该文档。和 <tt class="calibre8">ETag</tt> 首部类似，<tt class="calibre8">Cache-Control</tt> 首部也没有正式定义为实体首部。</p></li></ul><p class="calibre_"><span class="calibre3"><span class="bold">实体主体</span></span></p><p class="calibre_">实体主体中就是原始货物啦。<sup class="calibre4"><small class="calibre5"><span class="calibre6">1</span></small></sup> 任何其他描述性的信息都包含在首部中。因为货物（也就是实体主体）只是原始数据，所以需要实体首部来描述数据的意义。例如，<tt class="calibre8">Content-Type</tt> 实体首部告诉我们如何去解释数据（是图像还是文本等），而 <tt class="calibre8">Content-Encoding</tt> 实体首部告诉我们数据是不是已被压缩或者重编码。我们将在随后的小节中讨论所有这些方面及更多的内容。</p><p class="calibre_"><sup class="calibre4"><small class="calibre5"><span class="calibre6">1 如果有 </span><span class="calibre6"><tt class="calibre8">Content-Encoding</tt></span><span class="calibre6"> 首部的话，实体主体的内容就已经被指定的内容编码算法进行过编码了，第一个字节就是编码（比如，压缩）后的货物的第一个字节。</span></small></sup></p><p class="calibre_">首部字段以一个空白的 CRLF 行结束，随后就是实体主体的原始内容。不管内容是什么，文本或二进制的、文档或图像、压缩的或未压缩的、英语、法语或日语，都紧随这个 CRLF 之后。</p><p class="calibre_">图 15-2 展示了两个实际的 HTTP 报文的例子。一个携带着文本实体，另一个承载的是图像实体。十六进制的数值中展示的是报文的实际内容。</p><p class="calibre_8"><img src="images/00193.jpg" class="calibre_182"/></p><p class="calibre_10"><span class="calibre7">图 15-2　实际报文内容（紧随空白的 CRLF 之后的原始报文内容）的十六进制转储显示</span></p><div class="calibre_5"> </div><ul class="calibre_6"><li value="1" class="calibre_7"><p class="calibre_">在图 15-2a 中，实体主体从第 65 个字节开始，紧随首部末尾的 CRLF。实体主体中包含了“Hi! I'm a message!”这句话的 ASCII 编码字符。</p></li><li value="2" class="calibre_7"><p class="calibre_">在图 15-2b 中，实体主体从第 67 字节开始。实体主体包含了一个 GIF 格式图像的二进制内容。GIF 文件以 6 个字节的版本标志开头，后面是 16 位的宽度和 16 位的高度。可以在实体主体中直接看到这 3 项内容。 </p></li></ul><div class="mbp_pagebreak" id="calibre_pb_145"></div>
</body></html>
